{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$comment": "AI OSI Stack v5 / AEIP v1.3 Canonical Templates",
  "aeipSchemaVersion": "1.3",
  "@context": {
    "@vocab": "https://aiosi.org/aeip/v1.3#",
    "privacy.scope": "https://aiosi.org/terms/privacyScope",
    "privacy.consent": "https://aiosi.org/terms/privacyConsent",
    "privacy.redaction": "https://aiosi.org/terms/privacyRedaction",
    "privacy.justification": "https://aiosi.org/terms/privacyJustification",
    "provenance": "https://aiosi.org/terms/provenance",
    "provenance.source": "https://aiosi.org/terms/source",
    "provenance.datasetId": "https://aiosi.org/terms/datasetId",
    "provenance.personaId": "https://aiosi.org/terms/personaId",
    "justification": "https://aiosi.org/terms/justification",
    "justification.summary": "https://aiosi.org/terms/summary",
    "signatures": "https://aiosi.org/terms/signatures",
    "timestamp": "https://schema.org/dateModified",
    "version": "https://semver.org/spec/v2.0.0.html"
  },
  "$defs": {
    "privacyScope": {
      "type": "string",
      "enum": [
        "organizational",
        "systemic"
      ]
    },
    "privacyConsent": {
      "type": "string",
      "enum": [
        "explicit",
        "implicit"
      ]
    },
    "privacyRedaction": {
      "type": "boolean"
    },
    "privacyJustification": {
      "type": "string",
      "minLength": 1
    },
    "signatureEntry": {
      "type": "object",
      "properties": {
        "signer": {
          "type": "string"
        },
        "role": {
          "type": "string"
        },
        "signature": {
          "type": "string"
        },
        "algorithm": {
          "type": "string"
        },
        "signedAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "signer",
        "signature",
        "algorithm",
        "signedAt"
      ],
      "additionalProperties": false
    },
    "provenanceBlock": {
      "type": "object",
      "properties": {
        "source": {
          "type": "string",
          "format": "uri"
        },
        "datasetId": {
          "type": "string"
        },
        "personaId": {
          "type": "string"
        },
        "lineage": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uri"
          },
          "default": []
        }
      },
      "required": [
        "source",
        "datasetId",
        "personaId"
      ],
      "additionalProperties": false
    },
    "justificationBlock": {
      "type": "object",
      "properties": {
        "summary": {
          "type": "string"
        },
        "evidenceLinks": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uri"
          },
          "default": []
        },
        "confidence": {
          "type": "string"
        }
      },
      "required": [
        "summary"
      ],
      "additionalProperties": false
    },
    "baseArtifact": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        },
        "provenance": {
          "$ref": "#/$defs/provenanceBlock"
        },
        "justification": {
          "$ref": "#/$defs/justificationBlock"
        },
        "signatures": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/$defs/signatureEntry"
          }
        },
        "privacy.scope": {
          "$ref": "#/$defs/privacyScope"
        },
        "privacy.consent": {
          "$ref": "#/$defs/privacyConsent"
        },
        "privacy.redaction": {
          "$ref": "#/$defs/privacyRedaction"
        },
        "privacy.justification": {
          "$ref": "#/$defs/privacyJustification"
        }
      },
      "required": [
        "id",
        "type",
        "version",
        "timestamp",
        "provenance",
        "justification",
        "signatures",
        "privacy.scope",
        "privacy.consent",
        "privacy.redaction",
        "privacy.justification"
      ],
      "unevaluatedProperties": false
    },
    "SolomonBrief": {
      "allOf": [
        {
          "$ref": "#/$defs/baseArtifact"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "SolomonBrief"
            },
            "decisionContext": {
              "type": "string"
            },
            "rationale": {
              "type": "string"
            },
            "assumptions": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "outcomeHypotheses": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "required": [
            "decisionContext",
            "rationale"
          ]
        }
      ],
      "examples": [
        {
          "id": "urn:uuid:123e4567-e89b-12d3-a456-426614174000",
          "type": "SolomonBrief",
          "version": "1.0.0",
          "timestamp": "2024-05-01T12:00:00Z",
          "provenance": {
            "source": "https://ledger.aiosi.org/briefs/solomon-001",
            "datasetId": "ds-42",
            "personaId": "persona-guardian",
            "lineage": []
          },
          "justification": {
            "summary": "Summarizes legal and technical rationale for deploying mitigation strategy.",
            "evidenceLinks": [
              "https://evidence.aiosi.org/documents/mitigation-report"
            ],
            "confidence": "high"
          },
          "signatures": [
            {
              "signer": "did:aios:persona-guardian",
              "role": "lead-analyst",
              "signature": "MEUCIQCs5...",
              "algorithm": "Ed25519",
              "signedAt": "2024-05-01T12:05:00Z"
            }
          ],
          "privacy.scope": "organizational",
          "privacy.consent": "explicit",
          "privacy.redaction": false,
          "privacy.justification": "Contains only organizationally approved rationale.",
          "decisionContext": "Mitigation strategy for model drift in credit scoring pipeline.",
          "rationale": "Aligns risk posture with updated regulatory safeguards.",
          "assumptions": [
            "Mitigation plan reviewed by compliance",
            "Impact analysis covers last 6 months"
          ],
          "outcomeHypotheses": [
            "Default rate reduced by 8%",
            "No disparate impact introduced"
          ]
        }
      ]
    },
    "DecisionCard": {
      "allOf": [
        {
          "$ref": "#/$defs/baseArtifact"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "DecisionCard"
            },
            "decisionMatrix": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "criteria": {
                    "type": "string"
                  },
                  "weight": {
                    "type": "number"
                  },
                  "score": {
                    "type": "number"
                  }
                },
                "required": [
                  "criteria",
                  "weight",
                  "score"
                ],
                "additionalProperties": false
              }
            },
            "options": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "score": {
                    "type": "number"
                  }
                },
                "required": [
                  "id",
                  "description",
                  "score"
                ],
                "additionalProperties": false
              }
            },
            "selectedOption": {
              "type": "string"
            },
            "reviewWindow": {
              "type": "string"
            }
          },
          "required": [
            "decisionMatrix",
            "options",
            "selectedOption"
          ]
        }
      ],
      "examples": [
        {
          "id": "urn:uuid:223e4567-e89b-12d3-a456-426614174111",
          "type": "DecisionCard",
          "version": "1.1.0",
          "timestamp": "2024-05-02T09:30:00Z",
          "provenance": {
            "source": "https://ledger.aiosi.org/cards/card-078",
            "datasetId": "ds-credit-eval",
            "personaId": "persona-reviewer",
            "lineage": [
              "urn:uuid:123e4567-e89b-12d3-a456-426614174000"
            ]
          },
          "justification": {
            "summary": "Evaluates mitigation paths for credit scoring drift event.",
            "evidenceLinks": [
              "https://evidence.aiosi.org/dashboards/drift-metrics"
            ],
            "confidence": "medium"
          },
          "signatures": [
            {
              "signer": "did:aios:persona-reviewer",
              "role": "risk-oversight",
              "signature": "MEQCIAx3...",
              "algorithm": "Ed25519",
              "signedAt": "2024-05-02T09:35:00Z"
            }
          ],
          "privacy.scope": "organizational",
          "privacy.consent": "explicit",
          "privacy.redaction": true,
          "privacy.justification": "Redacted financial partner identifiers for limited audience.",
          "decisionMatrix": [
            {
              "criteria": "Regulatory Compliance",
              "weight": 0.4,
              "score": 0.9
            },
            {
              "criteria": "Operational Feasibility",
              "weight": 0.3,
              "score": 0.7
            }
          ],
          "options": [
            {
              "id": "option-a",
              "description": "Deploy targeted recalibration",
              "score": 0.82
            },
            {
              "id": "option-b",
              "description": "Suspend model pending audit",
              "score": 0.65
            }
          ],
          "selectedOption": "option-a",
          "reviewWindow": "2024-05-02T09:00:00Z/2024-05-09T09:00:00Z"
        }
      ]
    },
    "ClarityPackage": {
      "allOf": [
        {
          "$ref": "#/$defs/baseArtifact"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "ClarityPackage"
            },
            "modelContext": {
              "type": "string"
            },
            "observationWindow": {
              "type": "string"
            },
            "dataExtract": {
              "type": "object",
              "properties": {
                "sampleSize": {
                  "type": "integer",
                  "minimum": 0
                },
                "features": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "required": [
                "sampleSize",
                "features"
              ],
              "additionalProperties": false
            },
            "explanations": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "factor": {
                    "type": "string"
                  },
                  "influence": {
                    "type": "number"
                  },
                  "direction": {
                    "type": "string"
                  }
                },
                "required": [
                  "factor",
                  "influence",
                  "direction"
                ],
                "additionalProperties": false
              }
            }
          },
          "required": [
            "modelContext",
            "observationWindow",
            "dataExtract"
          ]
        }
      ],
      "examples": [
        {
          "id": "urn:uuid:323e4567-e89b-12d3-a456-426614174222",
          "type": "ClarityPackage",
          "version": "1.0.1",
          "timestamp": "2024-05-03T15:45:00Z",
          "provenance": {
            "source": "https://ledger.aiosi.org/packages/clarity-014",
            "datasetId": "ds-clarity",
            "personaId": "persona-insights",
            "lineage": [
              "urn:uuid:223e4567-e89b-12d3-a456-426614174111"
            ]
          },
          "justification": {
            "summary": "Details feature influence and observation context for mitigation assessment.",
            "evidenceLinks": [
              "https://evidence.aiosi.org/clarity/feature-attribution"
            ],
            "confidence": "medium"
          },
          "signatures": [
            {
              "signer": "did:aios:persona-insights",
              "role": "model-interpretability",
              "signature": "MEUCICpR...",
              "algorithm": "Ed25519",
              "signedAt": "2024-05-03T15:50:00Z"
            }
          ],
          "privacy.scope": "systemic",
          "privacy.consent": "explicit",
          "privacy.redaction": false,
          "privacy.justification": "Approved for systemic oversight distribution.",
          "modelContext": "Gradient boosting model deployed in credit scoring",
          "observationWindow": "2024-04-15T00:00:00Z/2024-05-01T00:00:00Z",
          "dataExtract": {
            "sampleSize": 5000,
            "features": [
              "income_ratio",
              "repayment_history",
              "age_group"
            ]
          },
          "explanations": [
            {
              "factor": "income_ratio",
              "influence": 0.31,
              "direction": "positive"
            },
            {
              "factor": "repayment_history",
              "influence": -0.22,
              "direction": "negative"
            }
          ]
        }
      ]
    },
    "GuardianNote": {
      "allOf": [
        {
          "$ref": "#/$defs/baseArtifact"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "GuardianNote"
            },
            "oversightNarrative": {
              "type": "string"
            },
            "dignityAssessment": {
              "type": "string"
            },
            "actions": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "followUp": {
              "type": "string"
            }
          },
          "required": [
            "oversightNarrative",
            "dignityAssessment"
          ]
        }
      ],
      "examples": [
        {
          "id": "urn:uuid:423e4567-e89b-12d3-a456-426614174333",
          "type": "GuardianNote",
          "version": "1.2.0",
          "timestamp": "2024-05-04T18:10:00Z",
          "provenance": {
            "source": "https://ledger.aiosi.org/notes/guardian-052",
            "datasetId": "ds-oversight",
            "personaId": "persona-guardian",
            "lineage": [
              "urn:uuid:323e4567-e89b-12d3-a456-426614174222"
            ]
          },
          "justification": {
            "summary": "Records oversight review outcomes and dignity assessment.",
            "evidenceLinks": [
              "https://evidence.aiosi.org/oversight/session-2024-05-04"
            ],
            "confidence": "high"
          },
          "signatures": [
            {
              "signer": "did:aios:persona-guardian",
              "role": "oversight",
              "signature": "MEQCIA56...",
              "algorithm": "Ed25519",
              "signedAt": "2024-05-04T18:12:00Z"
            }
          ],
          "privacy.scope": "organizational",
          "privacy.consent": "explicit",
          "privacy.redaction": false,
          "privacy.justification": "Oversight narrative cleared for organizational review.",
          "oversightNarrative": "Reviewed mitigation implementation and confirmed adherence to consent terms.",
          "dignityAssessment": "Transparency obligations met without introducing surveillance risk.",
          "actions": [
            "Schedule follow-up audit",
            "Publish anonymized summary"
          ],
          "followUp": "2024-06-01"
        }
      ]
    },
    "IntegrityLedgerEntry": {
      "allOf": [
        {
          "$ref": "#/$defs/baseArtifact"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "IntegrityLedgerEntry"
            },
            "immutableHash": {
              "type": "string"
            },
            "ledgerIndex": {
              "type": "integer",
              "minimum": 0
            },
            "linkedArtifacts": {
              "type": "array",
              "items": {
                "type": "string",
                "format": "uri"
              }
            },
            "governanceDirectives": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "driftSignal": {
              "type": "string"
            }
          },
          "required": [
            "immutableHash",
            "ledgerIndex"
          ]
        }
      ],
      "examples": [
        {
          "id": "urn:uuid:523e4567-e89b-12d3-a456-426614174444",
          "type": "IntegrityLedgerEntry",
          "version": "1.0.2",
          "timestamp": "2024-05-05T21:00:00Z",
          "provenance": {
            "source": "https://ledger.aiosi.org/entries/ledger-9981",
            "datasetId": "ds-ledger",
            "personaId": "persona-ledger",
            "lineage": [
              "urn:uuid:423e4567-e89b-12d3-a456-426614174333"
            ]
          },
          "justification": {
            "summary": "Commits mitigation bundle to immutable ledger with drift monitors armed.",
            "evidenceLinks": [
              "https://evidence.aiosi.org/ledger/proof-9981"
            ],
            "confidence": "high"
          },
          "signatures": [
            {
              "signer": "did:aios:persona-ledger",
              "role": "ledger-maintainer",
              "signature": "MEYCIQCj...",
              "algorithm": "Ed25519",
              "signedAt": "2024-05-05T21:05:00Z"
            }
          ],
          "privacy.scope": "systemic",
          "privacy.consent": "explicit",
          "privacy.redaction": false,
          "privacy.justification": "Ledger entry available to systemic oversight nodes.",
          "immutableHash": "sha3-512:4b1d5b1f...",
          "ledgerIndex": 9981,
          "linkedArtifacts": [
            "urn:uuid:123e4567-e89b-12d3-a456-426614174000",
            "urn:uuid:223e4567-e89b-12d3-a456-426614174111"
          ],
          "governanceDirectives": [
            "notify-oversight",
            "publish-reflection-trigger"
          ],
          "driftSignal": "armed"
        }
      ]
    }
  },
  "type": "object",
  "properties": {
    "@context": {
      "const": {
        "@vocab": "https://aiosi.org/aeip/v1.3#",
        "privacy.scope": "https://aiosi.org/terms/privacyScope",
        "privacy.consent": "https://aiosi.org/terms/privacyConsent",
        "privacy.redaction": "https://aiosi.org/terms/privacyRedaction",
        "privacy.justification": "https://aiosi.org/terms/privacyJustification",
        "provenance": "https://aiosi.org/terms/provenance",
        "provenance.source": "https://aiosi.org/terms/source",
        "provenance.datasetId": "https://aiosi.org/terms/datasetId",
        "provenance.personaId": "https://aiosi.org/terms/personaId",
        "justification": "https://aiosi.org/terms/justification",
        "justification.summary": "https://aiosi.org/terms/summary",
        "signatures": "https://aiosi.org/terms/signatures",
        "timestamp": "https://schema.org/dateModified",
        "version": "https://semver.org/spec/v2.0.0.html"
      }
    },
    "aeipSchemaVersion": {
      "const": "1.3"
    },
    "templates": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "SolomonBrief": {
          "$ref": "#/$defs/SolomonBrief"
        },
        "DecisionCard": {
          "$ref": "#/$defs/DecisionCard"
        },
        "ClarityPackage": {
          "$ref": "#/$defs/ClarityPackage"
        },
        "GuardianNote": {
          "$ref": "#/$defs/GuardianNote"
        },
        "IntegrityLedgerEntry": {
          "$ref": "#/$defs/IntegrityLedgerEntry"
        }
      },
      "required": [
        "SolomonBrief",
        "DecisionCard",
        "ClarityPackage",
        "GuardianNote",
        "IntegrityLedgerEntry"
      ]
    }
  },
  "required": [
    "@context",
    "aeipSchemaVersion",
    "templates"
  ],
  "additionalProperties": false
}
