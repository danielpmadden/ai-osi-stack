% AI OSI Stack v5 — Canonical Edition
% Appendix P — Integrity Manifest and Verification Commands
\narrative{
Appendix P publishes the integrity manifest that binds this edition to its release artefacts. Integrity steward Imani documents how the
manifest enumerates hashes for the PDF, schema registry, AEIP tables, and interpretive ledgers. The manifest is versioned in
\texttt{meta/v5-manifest.yaml} and referenced by Appendix~O provenance bundles and Appendix~N public attestations. By including this excerpt
within the canon, readers can verify the release without leaving the document.
}

\narrative{
The manifest excerpt shows how each artefact is mapped to its checksum, signing key, and verification command. Any change to an artefact
\shall{require a manifest update, witness signatures, and regeneration of auto-generated tables}. The manifest is auto-signed during the
release ceremony; the commands below reproduce the verification steps custodians run before publishing the edition.
}

\begin{lstlisting}[language=yaml,caption={v5 manifest excerpt}]
release:
  canonical_version: "AI OSI Stack v5"
  generated_at: "2025-11-07T20:10:00Z"
  manifest_hash: "sha512-<manifest-digest>"
artefacts:
  - name: ai-osi-stack-v5.pdf
    sha512: "<pdf-digest>"
    signing_key: "stack-custodian-ed25519"
  - name: source/appendices/generated/appendix-f-schema-registry.tex
    sha512: "<registry-digest>"
    signing_key: "stack-custodian-ed25519"
  - name: meta/v5-maturity.json
    sha512: "<maturity-digest>"
    signing_key: "stack-custodian-ed25519"
\end{lstlisting}

\begin{lstlisting}[language=bash,caption={Integrity verification commands}]
# Verify manifest integrity
shasum -a 512 meta/v5-manifest.yaml

# Validate generated tables
shasum -a 512 releases/ai-osi-stack-v5.pdf
shasum -a 512 source/appendices/generated/appendix-f-schema-registry.tex
shasum -a 512 source/appendices/generated/appendix-c-maturity-tables.tex

# Regenerate tables before release
python3 scripts/generate-tex-tables.py
\end{lstlisting}

\normative{
Custodians \shall{run the commands above prior to ratification}. Results \shall{be recorded in \texttt{INTEGRITY\_NOTICE.md}} with signer
references. Oversight actors \should{sample the manifest} during audits and \may{publish independent hash attestations}. If any checksum
changes unexpectedly, custodians \shall{halt publication}, regenerate the manifest, and re-run Appendix~O provenance procedures before
resuming distribution.
}
